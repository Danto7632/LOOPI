name: Build and Deploy Guide

on:
  push:
    branches: [ main ]
    paths: [ 'frontend/**' ]

jobs:
  build-frontend:
    name: Build Frontend
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        cache-dependency-path: frontend/package-lock.json

    - name: Install dependencies
      run: |
        cd frontend
        npm ci

    - name: Build project
      run: |
        cd frontend
        npm run build
      env:
        CI: false

    - name: Build Success âœ…
      run: |
        echo "ğŸ‰ í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
        echo ""
        echo "ğŸ“¦ ë¹Œë“œ ê²°ê³¼:"
        ls -la frontend/build/
        echo ""
        echo "ğŸš€ ë°°í¬ ì˜µì…˜:"
        echo ""
        echo "1ï¸âƒ£ Vercel ìˆ˜ë™ ë°°í¬ (ì¶”ì²œ):"
        echo "   â†’ https://vercel.com"
        echo "   â†’ Add New Project"
        echo "   â†’ Select LOOPI repository"
        echo "   â†’ Root Directory: frontend"
        echo "   â†’ Deploy"
        echo ""
        echo "2ï¸âƒ£ Netlify ìˆ˜ë™ ë°°í¬:"
        echo "   â†’ https://netlify.com"
        echo "   â†’ New site from Git"
        echo "   â†’ Select LOOPI repository"
        echo "   â†’ Build settings: npm run build"
        echo "   â†’ Publish directory: frontend/build"
        echo ""
        echo "3ï¸âƒ£ ìë™ ë°°í¬ ì„¤ì •:"
        echo "   â†’ Vercel/Netlify í† í°ì„ GitHub Secretsì— ì¶”ê°€"
        echo "   â†’ deploy-vercel.yml ì›Œí¬í”Œë¡œìš° ìë™ ì‹¤í–‰"
        echo ""
        echo "ğŸ“– ìì„¸í•œ ê°€ì´ë“œ:"
        echo "   â†’ .github/VERCEL_DEPLOYMENT_GUIDE.md"
        echo "   â†’ .github/FREE_BACKEND_DEPLOYMENT.md"

    - name: Upload build artifacts
      uses: actions/upload-artifact@v4
      with:
        name: frontend-build
        path: frontend/build/
        retention-days: 7