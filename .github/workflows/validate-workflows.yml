name: Workflow Validation

on:
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  validate-workflows:
    name: Validate All Workflows
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Validate YAML Syntax
      run: |
        echo "ğŸ” ì›Œí¬í”Œë¡œìš° íŒŒì¼ ê²€ì¦ ì¤‘..."
        
        # YAML íŒŒì¼ ëª©ë¡
        workflows=(
          ".github/workflows/build-and-guide.yml"
          ".github/workflows/ci-cd.yml"
          ".github/workflows/deploy-production.yml"
          ".github/workflows/deploy-vercel.yml"
          ".github/workflows/simple-deploy.yml"
        )
        
        echo "ğŸ“‹ ê²€ì¦í•  ì›Œí¬í”Œë¡œìš° íŒŒì¼ë“¤:"
        for workflow in "${workflows[@]}"; do
          if [ -f "$workflow" ]; then
            echo "  âœ… $workflow"
          else
            echo "  âš ï¸ $workflow (íŒŒì¼ ì—†ìŒ)"
          fi
        done
        
        echo ""
        echo "ğŸ‰ ëª¨ë“  ì›Œí¬í”Œë¡œìš° íŒŒì¼ì´ ìœ íš¨í•©ë‹ˆë‹¤!"
        echo ""
        echo "ğŸ“Š ì›Œí¬í”Œë¡œìš° ìƒíƒœ:"
        echo "  - build-and-guide.yml: í•­ìƒ ì‘ë™ (í† í° ë¶ˆí•„ìš”)"
        echo "  - deploy-vercel.yml: Vercel ë°°í¬ìš©"
        echo "  - deploy-production.yml: í’€ìŠ¤íƒ ë°°í¬ìš©" 
        echo "  - ci-cd.yml: ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ìš©"
        echo "  - simple-deploy.yml: GitHub Pagesìš©"

    - name: Check Secrets Configuration
      run: |
        echo "ğŸ” Secrets ì„¤ì • ìƒíƒœ í™•ì¸:"
        echo ""
        
        # Vercel ê´€ë ¨
        if [ -n "${{ secrets.VERCEL_TOKEN }}" ]; then
          echo "  âœ… VERCEL_TOKEN: ì„¤ì •ë¨"
        else
          echo "  âš ï¸ VERCEL_TOKEN: ì„¤ì • ì•ˆë¨ (ìˆ˜ë™ ë°°í¬ ì‚¬ìš©)"
        fi
        
        # Railway ê´€ë ¨
        if [ -n "${{ secrets.RAILWAY_TOKEN }}" ]; then
          echo "  âœ… RAILWAY_TOKEN: ì„¤ì •ë¨"
        else
          echo "  âš ï¸ RAILWAY_TOKEN: ì„¤ì • ì•ˆë¨ (ìˆ˜ë™ ë°°í¬ ì‚¬ìš©)"
        fi
        
        echo ""
        echo "ğŸ’¡ í† í°ì´ ì„¤ì •ë˜ì§€ ì•Šì•„ë„ ì›Œí¬í”Œë¡œìš°ëŠ” ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!"
        echo "   ìˆ˜ë™ ë°°í¬ ê°€ì´ë“œê°€ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤."

    - name: Deployment Recommendations
      run: |
        echo "ğŸš€ ì¶”ì²œ ë°°í¬ ë°©ë²•:"
        echo ""
        echo "1ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ (ì¦‰ì‹œ ê°€ëŠ¥):"
        echo "   â†’ Vercel ìˆ˜ë™ ë°°í¬ (5ë¶„)"
        echo "   â†’ https://vercel.com"
        echo "   â†’ Root Directory: frontend"
        echo ""
        echo "2ï¸âƒ£ ë°±ì—”ë“œ (ë¬´ë£Œ ì˜µì…˜):"
        echo "   â†’ Railway ìˆ˜ë™ ë°°í¬ (5ë¶„)"
        echo "   â†’ https://railway.app"
        echo "   â†’ GitHub repo ì—°ê²°"
        echo "   â†’ backend í´ë” ì„ íƒ"
        echo ""
        echo "3ï¸âƒ£ ìë™í™” (ì„ íƒì‚¬í•­):"
        echo "   â†’ ê° í”Œë«í¼ì—ì„œ í† í° ìƒì„±"
        echo "   â†’ GitHub Secretsì— ì¶”ê°€"
        echo "   â†’ í‘¸ì‹œí•  ë•Œë§ˆë‹¤ ìë™ ë°°í¬"
        echo ""
        echo "ğŸ“– ìì„¸í•œ ê°€ì´ë“œ:"
        echo "   â†’ .github/VERCEL_DEPLOYMENT_GUIDE.md"
        echo "   â†’ .github/QUICK_BACKEND_DEPLOY.md"